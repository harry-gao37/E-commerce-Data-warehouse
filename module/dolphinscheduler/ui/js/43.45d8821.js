(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1047:function(t,e,s){"use strict";s.r(e);var n=s(1983),a=s(1601);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);var o=s(18),u=Object(o.a)(a.default,n.a,n.b,!1,null,null,null);e.default=u.exports},1058:function(t,e,s){"use strict";s.r(e);var n=s(1059),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e.default=a.a},1059:function(t,e,s){"use strict";e.__esModule=!0,e.default={name:"list-construction",data:function(){return{}},props:{title:String}}},1069:function(t,e,s){"use strict";s.r(e);var n=s(1072),a=s(1058);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);var o=s(18),u=Object(o.a)(a.default,n.a,n.b,!1,null,null,null);e.default=u.exports},1072:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home-main list-construction-model"},[e("div",{staticClass:"content-title"},[e("span",[this._v(this._s(this.title))])]),this._v(" "),e("div",{staticClass:"conditions-box"},[this._t("conditions")],2),this._v(" "),e("div",{staticClass:"list-box"},[this._t("content")],2)])},a=[]},1249:function(t,e,s){"use strict";s.r(e);var n=s(1250),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e.default=a.a},1250:function(t,e,s){"use strict";e.__esModule=!0;var n=l(s(80)),a=l(s(64)),i=l(s(81)),o=l(s(622)),u=l(s(151)),r=l(s(150));function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"create-user",data:function(){return{store:i.default,router:o.default,queueList:[],userName:"",userPassword:"",tenantId:"",queueName:"",email:"",phone:"",tenantList:[],isADMIN:"ADMIN_USER"===i.default.state.user.userInfo.userType&&"account"!==o.default.history.current.name}},props:{item:Object,fromUserInfo:Boolean},methods:{_ok:function(){var t=this;if(this._verification()){if(this.item&&this.item.groupName===this.groupName)return void this._submit();this.store.dispatch("security/verifyName",{type:"user",userName:this.userName}).then((function(e){t._submit()})).catch((function(e){t.$message.error(e.msg||"")}))}},_verification:function(){var t=/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?![`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、]+$)[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、0-9A-Za-z]{6,22}$/,e=this.userName.length;if(e<3||e>39)return this.$message.warning(""+a.default.$t("User name length is between 3 and 39")),!1;if(!this.userName.replace(/\s*/g,""))return this.$message.warning(""+a.default.$t("Please enter user name")),!1;if(""!=this.userPassword&&this.item){if(!t.test(this.userPassword))return this.$message.warning(""+a.default.$t("Password consists of at least two combinations of numbers, letters, and characters, and the length is between 6-22")),!1}else if(!this.item&&!t.test(this.userPassword))return this.$message.warning(""+a.default.$t("Password consists of at least two combinations of numbers, letters, and characters, and the length is between 6-22")),!1;return this.email?/^([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,}$/.test(this.email)?!(this.phone&&!/^1(3|4|5|6|7|8)\d{9}$/.test(this.phone))||(this.$message.warning(""+a.default.$t("Please enter the correct mobile phone format")),!1):(this.$message.warning(""+a.default.$t("Please enter the correct email format")),!1):(this.$message.warning(""+a.default.$t("Please enter email")),!1)},_getQueueList:function(){var t=this;return new Promise((function(e,s){t.store.dispatch("security/getQueueList").then((function(s){t.queueList=n.default.map(s,(function(t){return{id:t.id,code:t.queueName}})),t.$nextTick((function(){t.queueName=t.queueList[0].id})),e()}))}))},_getTenantList:function(){var t=this;return new Promise((function(e,s){t.store.dispatch("security/getTenantList").then((function(s){var a=n.default.filter(s,(function(t){return-1!==t.id}));t.tenantList=n.default.map(a,(function(t){return{id:t.id,code:t.tenantName}})),t.$nextTick((function(){t.tenantList.length&&(t.tenantId=t.tenantList[0].id)})),e()}))}))},_submit:function(){var t=this;this.$refs.popup.spinnerLoading=!0;var e="";""!=this.queueName&&(e=this.queueList.length>0?n.default.find(this.queueList,["id",this.queueName]).code:"");var s={userName:this.userName,userPassword:this.userPassword,tenantId:this.tenantId,email:this.email,queue:e,phone:this.phone};this.item&&(s.id=this.item.id),this.store.dispatch("security/"+(this.item?"updateUser":"createUser"),s).then((function(e){setTimeout((function(){t.$refs.popup.spinnerLoading=!1}),800),t.$emit("onUpdate",s),t.$message.success(e.msg)})).catch((function(e){t.$message.error(e.msg||""),t.$refs.popup.spinnerLoading=!1}))}},watch:{},created:function(){var t=this;if(this.isADMIN)Promise.all([this._getQueueList(),this._getTenantList()]).then((function(){t.item&&(t.userName=t.item.userName,t.userPassword="",t.email=t.item.email,t.phone=t.item.phone,(t.fromUserInfo||t.item.tenantId)&&(t.tenantId=t.item.tenantId),t.$nextTick((function(){var e=n.default.find(t.queueList,["code",t.item.queue]);e&&(t.queueName=e.id||"")})))}));else if(this.item)if(this.userName=this.item.userName,this.userPassword="",this.email=this.item.email,this.phone=this.item.phone,(this.fromUserInfo||this.item.tenantId)&&(this.tenantId=this.item.tenantId),this.queueList.length>0){var e=n.default.find(this.queueList,["code",this.item.queue]);e&&(this.queueName=e.id||"")}else this.queueName=""},mounted:function(){},components:{mPopup:u.default,mListBoxF:r.default}}},1572:function(t,e,s){"use strict";s.r(e);var n=s(1633),a=s(1249);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);var o=s(18),u=Object(o.a)(a.default,n.a,n.b,!1,null,null,null);e.default=u.exports},1601:function(t,e,s){"use strict";s.r(e);var n=s(1602),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e.default=a.a},1602:function(t,e,s){"use strict";e.__esModule=!0;var n=i(s(1929)),a=i(s(1069));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:"account-index",mounted:function(){this.$modal.destroy()},components:{mListConstruction:a.default,mInfo:n.default}}},1603:function(t,e,s){"use strict";s.r(e);var n=s(1604),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e.default=a.a},1604:function(t,e,s){"use strict";e.__esModule=!0;var n=s(529),a=o(s(150)),i=o(s(1572));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"user-info",data:function(){return{}},props:{},methods:Object.assign({},(0,n.mapMutations)("user",["setUserInfo"]),(0,n.mapActions)("user",["getUserInfo"]),{_edit:function(){var t=this.userInfo,e=this,s=this.$modal.dialog({closable:!1,showMask:!0,escClose:!0,className:"v-modal-custom",transitionName:"opacityp",render:function(n){return n(i.default,{on:{onUpdate:function(t){e.setUserInfo(t),e.getUserInfo().finally((function(){s.remove()}))},close:function(){}},props:{item:t,fromUserInfo:!0}})}})}}),watch:{},created:function(){},mounted:function(){},computed:Object.assign({},(0,n.mapState)("user",["userInfo"])),components:{mListBoxF:a.default}}},1633:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("m-popup",{ref:"popup",attrs:{"ok-text":t.item?t.$t("Edit"):t.$t("Submit"),nameText:t.item?t.$t("Edit User"):t.$t("Create User")},on:{ok:t._ok}},[s("template",{slot:"content"},[s("div",{staticClass:"create-user-model"},[s("m-list-box-f",[s("template",{slot:"name"},[s("strong",[t._v("*")]),t._v(t._s(t.$t("User Name")))]),t._v(" "),s("template",{slot:"content"},[s("x-input",{attrs:{type:"input",maxlength:"60",placeholder:t.$t("Please enter user name")},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1)],2),t._v(" "),"account"!==t.router.history.current.name?s("m-list-box-f",[s("template",{slot:"name"},[s("strong",[t._v("*")]),t._v(t._s(t.$t("Password")))]),t._v(" "),s("template",{slot:"content"},[s("x-input",{attrs:{type:"password",placeholder:t.$t("Please enter your password")},model:{value:t.userPassword,callback:function(e){t.userPassword=e},expression:"userPassword"}})],1)],2):t._e(),t._v(" "),t.isADMIN?s("m-list-box-f",[s("template",{slot:"name"},[s("strong",[t._v("*")]),t._v(t._s(t.$t("Tenant")))]),t._v(" "),s("template",{slot:"content"},[s("x-select",{staticStyle:{width:"100%"},model:{value:t.tenantId,callback:function(e){t.tenantId=e},expression:"tenantId"}},t._l(t.tenantList,(function(t){return s("x-option",{key:t.id,attrs:{value:t.id,label:t.code}})})),1)],1)],2):t._e(),t._v(" "),t.isADMIN?s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("Queue")))]),t._v(" "),s("template",{slot:"content"},[s("x-select",{staticStyle:{width:"100%"},scopedSlots:t._u([{key:"trigger",fn:function(e){var n=e.selectedModel;return s("x-input",{attrs:{readonly:"",placeholder:t.$t("Please select a queue"),value:n?n.label:""},on:{"on-click-icon":function(e){e.stopPropagation(),t.queueName=""}}},[s("em",{directives:[{name:"show",rawName:"v-show",value:""==t.queueName,expression:"queueName ==''"}],staticClass:"ans-icon-fail-solid",staticStyle:{"font-size":"15px",cursor:"pointer"},attrs:{slot:"suffix"},slot:"suffix"}),t._v(" "),s("em",{directives:[{name:"show",rawName:"v-show",value:""!=t.queueName,expression:"queueName!=''"}],staticClass:"ans-icon-arrow-down",staticStyle:{"font-size":"12px"},attrs:{slot:"suffix"},slot:"suffix"})])}}],null,!1,106862924),model:{value:t.queueName,callback:function(e){t.queueName=e},expression:"queueName"}},[t._v(" "),t._l(t.queueList,(function(t){return s("x-option",{key:t.id,attrs:{value:t.id,label:t.code}})}))],2)],1)],2):t._e(),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[s("strong",[t._v("*")]),t._v(t._s(t.$t("Email")))]),t._v(" "),s("template",{slot:"content"},[s("x-input",{attrs:{type:"input",placeholder:t.$t("Please enter email")},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],2),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("Phone")))]),t._v(" "),s("template",{slot:"content"},[s("x-input",{attrs:{type:"input",placeholder:t.$t("Please enter phone number")},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],2)],1)])],2)},a=[]},1707:function(t,e,s){},1929:function(t,e,s){"use strict";s.r(e);var n=s(2029),a=s(1603);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s(1930);var o=s(18),u=Object(o.a)(a.default,n.a,n.b,!1,null,null,null);e.default=u.exports},1930:function(t,e,s){"use strict";s(1707)},1983:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this.$createElement,e=this._self._c||t;return e("m-list-construction",{attrs:{title:this.$t("User Information")}},[e("template",{slot:"content"},[e("m-info")],1)],2)},a=[]},2029:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-info-model"},[s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("User Name")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s(t.userInfo.userName))])])],2),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("Email")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s(t.userInfo.email))])])],2),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("Phone")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s(t.userInfo.phone))])])],2),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("Permission")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s("GENERAL_USER"===t.userInfo.userType?""+t.$t("Ordinary users"):""+t.$t("Administrator")))])])],2),t._v(" "),s("m-list-box-f",{directives:[{name:"ps",rawName:"v-ps",value:["GENERAL_USER"],expression:"['GENERAL_USER']"}]},[s("template",{slot:"name"},[t._v(t._s(t.$t("Tenant")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s(t.userInfo.tenantName))])])],2),t._v(" "),s("m-list-box-f",{directives:[{name:"ps",rawName:"v-ps",value:["GENERAL_USER"],expression:"['GENERAL_USER']"}]},[s("template",{slot:"name"},[t._v(t._s(t.$t("Queue")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s(t.userInfo.queueName))])])],2),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("Create Time")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s(t._f("formatDate")(t.userInfo.createTime)))])])],2),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("Update Time")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s(t._f("formatDate")(t.userInfo.updateTime)))])])],2),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[t._v(" ")]),t._v(" "),s("template",{slot:"content"},[s("x-button",{attrs:{type:"primary",shape:"circle"},on:{click:function(e){return t._edit()}}},[t._v(t._s(t.$t("Edit")))])],1)],2)],1)},a=[]}}]);